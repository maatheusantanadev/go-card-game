version: "3.9"

services:
  lobby:
    build: .
    container_name: lobby_server
    ports:
      - "4000:4000"     # TCP do lobby
      - "5000:5000/udp" # UDP para ping/resposta
    restart: unless-stopped
    networks:
      - lobby_net
    stdin_open: true
    tty: true

  tester:
    build: .
    depends_on:
      - lobby
    command: ["./load_tester", "-clients", "200", "-duration", "60s", "-addr", "lobby:4000"]
    networks:
      - lobby_net

networks:
  lobby_net:
    driver: bridge
